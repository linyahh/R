<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Linya Huang: DataViz Makeover2</title>

<meta property="description" itemprop="description" content="A introduction of making interactive dashboard in Tableau!"/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-06-20"/>
<meta property="article:created" itemprop="dateCreated" content="2021-06-20"/>
<meta name="article:author" content="Linya Huang"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Linya Huang: DataViz Makeover2"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="A introduction of making interactive dashboard in Tableau!"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Linya Huang"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Linya Huang: DataViz Makeover2"/>
<meta property="twitter:description" content="A introduction of making interactive dashboard in Tableau!"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["DataViz Makeover2"]},{"type":"character","attributes":{},"value":["A introduction of making interactive dashboard in Tableau!"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Linya Huang"]},{"type":"character","attributes":{},"value":["https://www.linkedin.com/in/linya-huang/"]}]}]},{"type":"character","attributes":{},"value":["06-20-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[6]},{"type":"logical","attributes":{},"value":[false]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["datamakeover2_files/anchor-4.2.2/anchor.min.js","datamakeover2_files/bowser-1.9.3/bowser.min.js","datamakeover2_files/distill-2.2.21/template.v2.js","datamakeover2_files/jquery-1.11.3/jquery.min.js","datamakeover2_files/popper-2.6.0/popper.min.js","datamakeover2_files/tippy-6.2.7/tippy-bundle.umd.min.js","datamakeover2_files/tippy-6.2.7/tippy-light-border.css","datamakeover2_files/tippy-6.2.7/tippy.css","datamakeover2_files/tippy-6.2.7/tippy.umd.min.js","datamakeover2_files/webcomponents-2.0.0/webcomponents.js","pic/1_original_design.jpg","pic/3.1alternativedesign.jpg","pic/4.1.10 Rename and Remove Field.png","pic/4.1.11 T2 and join.png","pic/4.1.12 Join tables.png","pic/4.1.13 Calculated Field.png","pic/4.1.13 USN tables.png","pic/4.1.14 Join UNSD to Map Country with Region.png","pic/4.1.16 Clean Join2 Data.png","pic/4.1.17 Aggregate.png","pic/4.1.18 Output.png","pic/4.1.6 split columns.png","pic/4.1.7 Filter country.png","pic/4.1.8 pivot table.png","pic/4.1.9calculate values.png","pic/4.2 Import data into tableau.png","pic/4.2.10formatlabel.png","pic/4.2.11pathchartcolumnsrows.png","pic/4.2.12pathchartcalculation.png","pic/4.2.13pathchartLine.png","pic/4.2.14pathchartdot.png","pic/4.2.15countrylist.png","pic/4.2.16layout.png","pic/4.2.17dashboard_actions.png","pic/4.2.182text.png","pic/4.2.18filtercountrylist.png","pic/4.2.19dashboard.png","pic/4.2.2 Create Parameters.png","pic/4.2.20annimation.png","pic/4.2.3calculation field for parameters.png","pic/4.2.4slopechartrowcolumns.png","pic/4.2.5dualaxis.png","pic/4.2.6barchartformat.png","pic/4.2.7Linechartformat.png","pic/4.2.7Linechartformat_2.png","pic/4.2.9yearendlabel.png","pic/5.1totaltrading.png","pic/5.2netexport_europe.png","pic/5.2netimport.png","pic/5.2netimport_america.png","pic/5.2netimport_oceania.png","pic/Figure_4.1.2. _Data_Load.jpg","pic/Figure_4.1.3_Check_Data_Interpreter.jpg","pic/Figure_4.1.4_Initialize_Workspace.jpg","pic/Figure_4.1.5._Remove_Non_target_Date_Columns.jpg","pic/Figure_4_1_1_ Data_Downloaded_from_Website.jpg"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"DataViz Makeover2","description":"A introduction of making interactive dashboard in Tableau!","authors":[{"author":"Linya Huang","authorURL":"https://www.linkedin.com/in/linya-huang/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-06-20T00:00:00.000+08:00","citationText":"Huang, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Linya Huang</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>DataViz Makeover2</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>A introduction of making interactive dashboard in Tableau!</p></p>
</div>

<div class="d-byline">
  Linya Huang <a href="https://www.linkedin.com/in/linya-huang/" class="uri">https://www.linkedin.com/in/linya-huang/</a> 
  
<br/>06-20-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction">1. Introduction</a></li>
<li><a href="#asessment-of-clarity-and-aesthetics-in-original-design">2. Asessment of Clarity and Aesthetics in Original Design</a></li>
<li><a href="#alternative-design-sketches-and-published-dashboard">3. Alternative Design Sketches and Published Dashboard</a></li>
<li><a href="#tableau-tutorial-step-by-step">4. Tableau Tutorial Step-by-Step</a><ul>
<li><a href="#data-preparation-in-tableau-prep">4.1 Data Preparation in Tableau Prep</a></li>
<li><a href="#data-makeover-in-tableau-desktop">4.2 Data Makeover in Tableau Desktop</a></li>
</ul></li>
<li><a href="#major-observations">5. Major Observations</a></li>
<li><a href="#reference">Reference:</a></li>
</ul>
</nav>
</div>
<h1 id="introduction">1. Introduction</h1>
<p>In this data visualization makeover, I will apply interactive techniques in tableau to make an animated dashboard.</p>
<p>The original design is from <a href="https://www.singstat.gov.sg/modules/infographics/singapore-international-trade">Department of Statistics, Singapore</a></p>
<figure>
<img src="pic/1_original_design.jpg" style="width:60.0%" alt="" /><figcaption>Figure 1.1 Original Visualization</figcaption>
</figure>
<h1 id="asessment-of-clarity-and-aesthetics-in-original-design">2. Asessment of Clarity and Aesthetics in Original Design</h1>
<p><strong>Clarity</strong></p>
<ol type="1">
<li><p><strong>Misleading circle presentation</strong> By applying total trading value as size, some countries have circle occupying both net importers and net exporter areas, hence the roles of counties around diagonal area is not very clear.</p></li>
<li><p><strong>No key insights annotation</strong> The only key insights reader get at the first glance is the top net importer/exporter countries with marked star and animated arrows, but more insights should have been derived from the visualization.</p></li>
<li><p><strong>Notes Discrepancy</strong> Meanwhile, the only note in the bottom describes the information of China and US since 2009 and 2006, which mismatches the main visualization showing trading value of 2020.</p></li>
<li><p><strong>Unclear x-y axis label</strong> The label of both axis should be moved to right and top respectively, although it has been differentiated by 2 colors, putting them together at the zero point is not a wise choice. And currency unit should also been added in both axis.</p></li>
</ol>
<p><strong>Aesthetics</strong></p>
<ol type="1">
<li><p><strong>Poor use of color</strong> There are 10 different solid circles with white dot center representing countries, as well as 2 different colors representing background and axis ticks in the chart, making the whole design too colorful for professional business/economy data presentation. Also, the blue and green globe circle is redundant for axis labels.</p></li>
<li><p><strong>Crowded labels and circles</strong> Due to the crowded design, some circles and labels are overlapping with each other and some currency label is missing. Besides, some label are even exceeded the main chart. This is a very poor use of scatter plot and labels.</p></li>
<li><p><strong>Poor Animation</strong> The design of flashing up/down arrow in the stars is meaningless. In addition, when hovering mouse to countries, the vibration does not provide additional insights at all.</p></li>
</ol>
<p><strong>Suggestions to based on original design</strong></p>
<ol type="1">
<li><p><strong>Improvement of color and scatter circle</strong> Try to apply fewer kinds of color to represent importer and exporter countries, and remove background color and circle for axis label. Revise opacity of circle and add boarder to avoid overlap area and distinguish countries.</p></li>
<li><p><strong>Fine-tune text elements</strong> Revise labels and title and add key insights.</p></li>
<li><p><strong>Remove meaningless animations</strong> Remove all unnecessary animations in the chart.</p></li>
</ol>
<h1 id="alternative-design-sketches-and-published-dashboard">3. Alternative Design Sketches and Published Dashboard</h1>
<p>To overcome the issues discussed above, here is my proposal of design sketches.</p>
<p><img src="pic/3.1alternativedesign.jpg" alt="Figure 3.1 Alternative Design Sketches" /> In the alternative design, I plan to use three graph charts.</p>
<p><strong>Scatter Plot</strong></p>
<p>Inspired by <a href="https://ourworldindata.org/growth-and-structural-transformation-are-emerging-economies-industrializing-too-quickly">Viualization from Esteban Ortiz-Ospina and Nicolas Lippolis 2017</a>, to show two dimension comparison of time series data, I would like to track the trajectory path of Import and Export value on a scatter plot with year as path and dot as values. I will make the dot small to avoid overlapping as much as possible. Then, by dragging the year slicer on top of the chart, the user can see a clear yearly evaluation path of specific country. In terms of color usage, I will only use 2 colors to differentiate importer and exporter roles for dot label, so that the chart won’t be very crowded and colorful for business presentation.</p>
<p><strong>Slope/Line Chart</strong></p>
<p>I will add another slope/line chart right next to the scatter plot to provide a quick and clear overview that how import/export/total trading/net export value has been changed throughout the selected period. I will use diverging colors to highlight countries with high values in dark blue and ‘hide’ those with low values in light gray colors. The clear absolute dollar values and % change trend in slope/line graph will be a good supplement to the scatter plot.</p>
<p><strong>Country List</strong></p>
<p>A country list by select measure ranking will be add to the right of the dashboard, so that user can select or hover to any country and highlight in both charts. This can help solve the poor animation problem discussed above and make the chart more interactive.</p>
<p><strong>Interactive Approach</strong></p>
<p>•1. A year slicer will be added into the table for user to select different year period. •2. Region, line/slope graph and select measure will be added as filter so that user can focus on desired focal. •3. Ideally, when hovering mouse to any of trajectory (in scatter plot), line (in slope/line graph) or country (in country list), other visualization will show the highlighted objectives and ‘hide’ others.</p>
<p><strong>Clarity</strong></p>
<p>•Clear Year Pattern-By using year path and dot presentation, the value will be clearly represented. •Added title and key insights-Title will be tuned and insights will be added so that reader can get the important message at the first glance. •Revised Axis Labels-Currency unit will be added to axis labels.</p>
<p><strong>Aesthetics</strong></p>
<p>•Suitable Color Presentation for Business Purpose- background color will be removed from original design and fewer color will be applied in the new design. •Clear Labels and Numbers and no Overlapping- Values and changes during the period will be presented more clearly and misleading overlapping area will be avoided. •Interactive Slicer,Filter and Highlighter- Users will have multiple selection for different focal and the values will be highlighted across charts with simple click or hover.</p>
<p>The final look of the data visualization makeover is available in <a href="https://public.tableau.com/app/profile/linya.huang/viz/Data_Makeover2/Dashboard1">Tableau Public</a>.</p>
<figure>
<img src="pic/4.2.19dashboard.png" alt="" /><figcaption>Figure 3.2 Final Look of new design</figcaption>
</figure>
<h1 id="tableau-tutorial-step-by-step">4. Tableau Tutorial Step-by-Step</h1>
<h2 id="data-preparation-in-tableau-prep">4.1 Data Preparation in Tableau Prep</h2>
<p>The data is downloaded from sub-section of <a href="https://www.singstat.gov.sg/find-data/search-by-theme/trade-and-investment/merchandise-trade/latest-data">Merchandise Trade by Region/Market</a>. Let’s download the file to local drive, unzip and open it.</p>
<p>Noted the raw data has 3 tabs, content, T1(import) and T2(export). In both T1 and T2, top 3 rows consists introduction of data and followed by countries/ continents variables , currency unit and values from 1976 January till 2021 March.</p>
<p><img src="pic/Figure_4_1_1_%20Data_Downloaded_from_Website.jpg" alt="Figure 4.1.1. Data Downloaded from Website" /> <strong>4.1.2 Load data to tableau Prep</strong></p>
<p>After understanding the raw data structure. Next, let’s launch Tableau Prep Builder and load data.</p>
<p>•1.click Connect to Data button</p>
<p>•2.select Microsoft Excel on the left bar</p>
<p>•3.locate to target file folder</p>
<p>•4.confirm and click Open</p>
<p><img src="pic/Figure_4.1.2.%20_Data_Load.jpg" alt="Figure 4.1.2. Data Load to Tableau Prep" /> <strong>4.1.3 Check Data Interpreter</strong></p>
<p>After loading the data, the excel sheets will appear on the left side bar. Then check the box of Use Data Interpreter so that tableau can help to clean the excel workbook , for example, to remove the top 3 rows introduction and locate to the main table in the sheet.</p>
<figure>
<img src="pic/Figure_4.1.3_Check_Data_Interpreter.jpg" alt="" /><figcaption>Figure 4.1.3 Check Data Interpreter</figcaption>
</figure>
<p><strong>4.1.4 Initialize Workspace</strong></p>
<ul>
<li><ol type="1">
<li>Drag sheet T1 into work space.</li>
</ol></li>
<li><ol start="2" type="1">
<li>Click the round “+” button next to T1</li>
</ol></li>
<li><ol start="3" type="1">
<li>Click add Clean Step.</li>
</ol></li>
</ul>
<p><img src="pic/Figure_4.1.4_Initialize_Workspace.jpg" alt="Figure 4.1.4 Initialize Workspace" /> <strong>4.1.5. Remove Non-target Date Columns</strong></p>
<p>Since we are only interested in date period from 2011 and 2020, let’s remove those non-target period following the steps below.</p>
<ul>
<li><ol type="1">
<li>click show list view</li>
</ol></li>
<li><ol start="2" type="1">
<li>select non-target date columns by pressing ‘shift’ key on the keyboard</li>
</ol></li>
<li><ol start="3" type="1">
<li>right click and select remove</li>
</ol></li>
</ul>
<figure>
<img src="pic/Figure_4.1.5._Remove_Non_target_Date_Columns.jpg" alt="" /><figcaption>Figure 4.1.5. Remove Non-target Date Columns</figcaption>
</figure>
<p><strong>4.1.6. Split Currency and Country Name</strong></p>
<p>Noticed that Variables column does not follow the same pattern, as some of the coutries has two parentheses in the colunmn, such as Slovak Republic (Slovakia)(Thousand Dollars). Therefore, to split them, a few steps are performed as below.</p>
<ul>
<li><ol type="1">
<li>TRIM( SPLIT( [Variables], “(”, 1 ) )</li>
</ol></li>
<li><ol start="2" type="1">
<li>TRIM( SPLIT( [Variables], “(”, 2 ) )</li>
</ol></li>
<li><ol start="3" type="1">
<li>TRIM( RIGHT([Variables], if(FINDNTH([Variables],“(”, 2) &gt; 0) then LEN([Variables]) - FINDNTH([Variables],“(”, 2) - LEN(“(”) + 1 else 0 end) )</li>
</ol></li>
<li><ol start="4" type="1">
<li>TRIM( SPLIT( [Variables - Split 2], “Dollars”, 1 ) )</li>
</ol></li>
<li><ol start="5" type="1">
<li>TRIM( SPLIT( [Variables - Split 3], " ", 1 ) )</li>
</ol></li>
<li><ol start="6" type="1">
<li>IF [Variables - Split 2 - Split 1] != “Thousand” AND [Variables - Split 2 - Split 1] != “Million” THEN [Variables - Split 3 - Split 1] ELSE [Variables - Split 2 - Split 1]END</li>
</ol></li>
<li><ol start="7" type="1">
<li>IF [Variables - Split 3 - Split 1] =“Thousand” THEN [Variables - Split 1]+“(”+[Variables - Split 2 - Split 1] ELSE [Variables - Split 1] END</li>
</ol></li>
<li><ol start="8" type="1">
<li>Remove the intermediate columns and leave the relative country and currency only.</li>
</ol></li>
</ul>
<figure>
<img src="pic/4.1.6%20split%20columns.png" alt="" /><figcaption>Figure 4.1.6. Split Country and Currency Columns</figcaption>
</figure>
<p><strong>4.1.7. Filter Country</strong></p>
<p>Filter out continents and header ‘Total Merchandies Imports’ by clicking Country variable &gt;&gt; Filter by selected value</p>
<figure>
<img src="pic/4.1.7%20Filter%20country.png" alt="" /><figcaption>Figure 4.1.7. Split Country and Currency Columns</figcaption>
</figure>
<p><strong>4.1.8. Add Pivot Step and Get a Pivot Table</strong></p>
<p>•1. Click on the ‘+’ button next to ‘Clean 1’ step at the work space area and selecting Pivot option.</p>
<p>•2. Select Columns to Rows option and drag all dates to Pivot Fields.</p>
<p><img src="pic/4.1.8%20pivot%20table.png" alt="Figure 4.1.8. Split Country and Currency Columns" /> <strong>4.1.9. Calculate Values</strong></p>
<p>Create Calculated Field by inputting the formulas below.</p>
<p><img src="pic/4.1.9calculate%20values.png" alt="Figure 4.1.9. Calculate Values" /> <strong>4.1.10. Rename and Remove Variables</strong></p>
<p>•1. Then Remove the calculate columns as Values(Import) , [Pivot 1 Values] by selecting the field and clicking remove option •2. Rename [Pivot Names] to [Date] •3. Remove [Currency Unit] field</p>
<figure>
<img src="pic/4.1.10%20Rename%20and%20Remove%20Field.png" alt="" /><figcaption>Figure 4.1.10. Rename and Remove Filed</figcaption>
</figure>
<p><strong>4.1.11. Repeat and join T1 and T2</strong></p>
<p>•1. Repeat the same steps for table T2(Export data) as we just did for T1 •2. Drag T2 to T1 to join two tables</p>
<figure>
<img src="pic/4.1.11%20T2%20and%20join.png" alt="" /><figcaption>Figure 4.1.11.Join T1 and T2</figcaption>
</figure>
<p><strong>4.1.12. Table Join Rules</strong></p>
<p>•1. Applied ‘Date’ and ‘Country’ Join Clauses •2. Choose the full join type</p>
<figure>
<img src="pic/4.1.12%20Join%20tables.png" style="width:40.0%" alt="" /><figcaption>Figure 4.1.12 Tabel Join Rules</figcaption>
</figure>
<p><strong>4.1.13. Add Calculated Fields</strong></p>
<p>Then, let’s create 2 calculation filed as below,</p>
<p>“Net Export=[Values (Export)]-[Values (Import)]”</p>
<p>“Total Trading Values=[Values (Export)]+[Values (Import)]”</p>
<figure>
<img src="pic/4.1.13%20Calculated%20Field.png" style="width:80.0%" alt="" /><figcaption>Figure 4.1.13 Add Calculated Fields</figcaption>
</figure>
<p><strong>4.1.14. Download Standard country statistical use table</strong></p>
<p>In order to enable country and region selection in the final design, I downloaded the standard country statistical use table online.</p>
<p>According to Department of Statistics, Singapore-<a href="https://www.singstat.gov.sg/standards/international-classifications">International Classifications</a>, the <a href="https://unstats.un.org/unsd/methodology/m49/">Standard country or area codes for statistical use (M49)</a> is applied for country and region mapping.</p>
<p>Download the <a href="https://unstats.un.org/unsd/methodology/m49/overview/">excel file</a> from the website.</p>
<p>Select ‘Region Name’ and ‘Country or Area’ two columns as highlighted in Figure 4.1.14.</p>
<figure>
<img src="pic/4.1.13%20USN%20tables.png" alt="" /><figcaption>Figure 4.1.14 UNSD Table</figcaption>
</figure>
<p><strong>4.1.15. Import UNSD Table and Map Country and Region</strong></p>
<p>Import table into the work space and join with the cleaned data generated from above steps.</p>
<p>Input ‘Country’=‘Country’ as applied join clauses.</p>
<p><img src="pic/4.1.14%20Join%20UNSD%20to%20Map%20Country%20with%20Region.png" alt="Figure 4.1.15 Map Country and Region" /> <strong>4.1.16. Clean Jion2 Data</strong></p>
<p>•1. Remove duplicated Country-1 Variable •2. Create calculated field “Year=YEAR([Date])” •3. Remove Date Column •4. Filter Countries Yamen Democratic and Germany, Democratic Republic Of with no value during the period</p>
<p><img src="pic/4.1.16%20Clean%20Join2%20Data.png" alt="Figure 4.1.16. Clean Jion2 Data" /> <strong>4.1.17. Aggregate Data by Year</strong></p>
<p>Since we are only interested in the long term period time, let’s add another aggregate step following Clean 3 Step.</p>
<p>Drag Country/Year/Region to the left aggregated panel and numerical values to the right panel.</p>
<figure>
<img src="pic/4.1.17%20Aggregate.png" alt="" /><figcaption>Figure 4.1.17. Aggregate Data by Year</figcaption>
</figure>
<p><strong>4.1.18. Output Cleaned Data</strong></p>
<p>Move on to the last clean data step, add output step to get the tableau file.</p>
<p>• 1. Click on Browse</p>
<p>• 2. Locate to the file location, change the File name</p>
<p>• 3. Click Run Flow button to get the tableau output file</p>
<figure>
<img src="pic/4.1.18%20Output.png" alt="" /><figcaption>Figure 4.1.18. Output Cleaned Data</figcaption>
</figure>
<h2 id="data-makeover-in-tableau-desktop">4.2 Data Makeover in Tableau Desktop</h2>
<p><strong>4.2.1. Import Cleaned Data into Tableau Desktop</strong></p>
<p>Drag the cleaned data into Tableau Desktop</p>
<figure>
<img src="pic/4.2%20Import%20data%20into%20tableau.png" alt="" /><figcaption>Figure 4.2.1. Import Cleaned Data into Tableau Desktop</figcaption>
</figure>
<p><strong>4.2.2. Create Parameters</strong></p>
<p>•1. Right click blank area and select create parameters •2. Create two parameters as shown in the figure 4.2.2</p>
<p><img src="pic/4.2.2%20Create%20Parameters.png" alt="Figure 4.2.2. Create Parameters" /><br />
<strong>4.2.3. Create Calculated Field for Parameters</strong></p>
<p>•1. Right click blank area and select create calculated field •2. Create two calculated field ‘Select Measure’ and ‘Line/Slope Toggle’ as shown in figure 4.2.3</p>
<figure>
<img src="pic/4.2.3calculation%20field%20for%20parameters.png" alt="" /><figcaption>Figure 4.2.3. Create Calculated Field for Parameters</figcaption>
</figure>
<p><strong>4.2.4. Slope Chart - Columns, Rows and Filters</strong></p>
<p>•1. Drag Years to Columns, Select Measure to Rows •2. Double click blank ares next to select measure and input formula ‘MIN(1)’ •3. Drag ‘Country’,‘Region’ and ‘Line/Slope Toggle’ to Filters</p>
<figure>
<img src="pic/4.2.4slopechartrowcolumns.png" alt="" /><figcaption>Figure 4.2.4. Slope Chart - Columns, Rows and Filters</figcaption>
</figure>
<p><strong>4.2.5. Slope Chart - Dual Axis Bar Chart</strong></p>
<p>•1. Make ‘Min(1)’ as dual axis •2. Change the Marks type to Bar •3. Double click ‘Min(1)’ axis and change the range type to ‘Fixed’ 0-1</p>
<figure>
<img src="pic/4.2.5dualaxis.png" alt="" /><figcaption>Figure 4.2.5. Slope Chart - Dual Axis Bar Chart</figcaption>
</figure>
<p><strong>4.2.6. Slope Chart- Format Size and Color</strong></p>
<p>•1. Change the size of the bar to minimum •2. Update color of ‘MIN(1)’ and ‘Select Measure’ Variables</p>
<figure>
<img src="pic/4.2.6barchartformat.png" alt="" /><figcaption>Figure 4.2.6. Slope Chart - Slope Chart- Format Size and Color</figcaption>
</figure>
<p><strong>4.2.7. Slope Chart- Chart Detail and Color Format</strong></p>
<p>•1. Change mark ‘Select Measure’ as Line •2. Drag ‘Country’ as detail and ‘Select Measure’ as color options under mark •3. Edit color into custom diverging with 5 steps</p>
<figure>
<img src="pic/4.2.7Linechartformat.png" alt="" /><figcaption>Figure 4.2.7. Slope Chart - Chart Detail and Color Format</figcaption>
</figure>
<p><strong>4.2.8. Slope Chart- Add labels</strong></p>
<p>•1. Add ‘Country’,‘Select Measure’ to label •2. Format labels with no decimal and prefix ‘$’</p>
<figure>
<img src="pic/4.2.7Linechartformat_2.png" alt="" /><figcaption>Figure 4.2.8. Slope Chart - Add labels</figcaption>
</figure>
<p><strong>4.2.9. Slope Chart- Add % of Change Labels for Year End1</strong></p>
<p>Create ‘% change’ and ‘% change label’ calculation fields.</p>
<figure>
<img src="pic/4.2.9yearendlabel.png" alt="" /><figcaption>Figure 4.2.9. Slope Chart - Add % of Change Labels for Year End</figcaption>
</figure>
<p><strong>4.2.10. Slope Chart- Add Left Labels and Parameters</strong></p>
<p>•1. Add ‘% change label’ as label •2. Click Label and check Label start/end of line •3. Right click parameters and check Show Parameter</p>
<p><img src="pic/4.2.10formatlabel.png" alt="Figure 4.2.10. Slope Chart - Add % of Change Labels for Year End" /><br />
<strong>4.2.11. Scatter Plot - Columns and Rows </strong></p>
<p>•1. Drag ‘Export’ to columns and 2 ‘Import’ to rows •2. Make ’Import’dual axis and uncheck show headers</p>
<figure>
<img src="pic/4.2.11pathchartcolumnsrows.png" alt="" /><figcaption>Figure 4.2.11. Scatter Plot - Columns and Rows</figcaption>
</figure>
<p><strong>4.2.12. Scatter Plot - Create Calculation Field </strong></p>
<p>Create a calculation field to differenciate trade dificit and trade surplus.</p>
<figure>
<img src="pic/4.2.12pathchartcalculation.png" alt="" /><figcaption>Figure 4.2.12. Scatter Plot - Create Calculation Field</figcaption>
</figure>
<p><strong>4.2.13. Scatter Plot - Create Path</strong></p>
<p>•1. Change the types of ‘SUM(Import)(2)’marks as Line •2. Drag ’Country’ as detail and label option under Marks •3. Drag ‘Year’ as path option under Marks and change the color to gray</p>
<figure>
<img src="pic/4.2.13pathchartLine.png" alt="" /><figcaption>Figure 4.2.13. Scatter Plot - Create Path</figcaption>
</figure>
<p><strong>4.2.14. Scatter Plot - Create Dot</strong></p>
<p>•1. Change the types of ‘SUM(Import)(2)’marks as Circle •2. Drag ’Country’ as detail,‘Importer/Exporter’ as color, ‘Year’ as Label, ‘Select Measure’ as size and tooltip •3. Change the color of ‘Trade Deficit’ and ‘Trade Surplus’</p>
<p><img src="pic/4.2.14pathchartdot.png" alt="Figure 4.2.14. Scatter Plot - Create Dot" /><br />
<strong>4.2.15. Country List</strong></p>
<p>Let’s create another worksheet as a country list selection panel.</p>
<p>•1. Create another calculation field called ‘Rank’ as shown in Figure 4.2.15. as below •2. Drag ‘Country’ to rows and ‘Year’,‘Region’,‘Country’ to filters as well •3. Drag ‘Rank’ as label under marks</p>
<p><img src="pic/4.2.15countrylist.png" alt="Figure 4.2.15. Country List_" /><br />
<strong>4.2.16. Country List</strong> Let’s create another worksheet as a country list selection panel.</p>
<p>•1. Create another calculation field called ‘Rank’ as shown in Figure 4.2.15. as below •2. Drag ‘Country’ to rows and ‘Year’,‘Region’,‘Country’ to filters as well •3. Drag ‘Rank’ as label under marks</p>
<figure>
<img src="pic/4.2.15countrylist.png" alt="" /><figcaption>Figure 4.2.15. Country List</figcaption>
</figure>
<p><strong>4.2.16. Dashboard Layout</strong></p>
<p>•1. Create a dashboard sheet •2. Place charts, filter,legend to the dashboard •3. Add Text and Blank objects with layout shown as below</p>
<p><img src="pic/4.2.16layout.png" alt="Figure 4.2.16. Dashboard Layout" /> <strong>4.2.17 Create Highlight Action</strong></p>
<p>To make the dashboard more interactive and highlight the country in both charts when selecting or hovering mouse, please follow the steps below. •1. Click dashboard &gt;&gt; actions on the menu bar •2. Create 1 filter and 2 highlight actions as shown in Figure 4.2.17</p>
<p><img src="pic/4.2.17dashboard_actions.png" alt="Figure 4.2.17. Dashboard Layout" /> <strong>4.2.18 Check the Country List as Filter</strong></p>
<p>Click ‘More Options’ of the country list chart and check ‘Use as Filter’ Option.</p>
<p>By doing so, when user select countries on the right country list filter, the country will be highlighted in both charts.</p>
<figure>
<img src="pic/4.2.18filtercountrylist.png" style="width:20.0%" alt="" /><figcaption>Figure 4.2.18. Check the Country List as Filter</figcaption>
</figure>
<p><strong>4.2.19 Format Text Title</strong></p>
<p>Double Click the text to edit. Below is the sample of how parameters are added, such that when switching between select measure, the title of the text will change accordingly.</p>
<figure>
<img src="pic/4.2.182text.png" alt="" /><figcaption>Figure 4.2.19. Format Text Title</figcaption>
</figure>
<p><strong>4.2.20 Add Animation</strong></p>
<p>To make the dashboard more intersting, lets add animation function in the chart to show the changing path.</p>
<p>•1. Click Format &gt;&gt;Animations</p>
<p>•2. Click On and change the duration to 2.0 seconds</p>
<figure>
<img src="pic/4.2.20annimation.png" alt="" /><figcaption>Figure 4.2.20. Add Animation</figcaption>
</figure>
<p><strong>Bravo! We have completed the dashboard!</strong></p>
<p><a href="https://public.tableau.com/app/profile/linya.huang/viz/Data_Makeover2/Dashboard1">Tableau Public</a>.</p>
<figure>
<img src="pic/4.2.19dashboard.png" alt="" /><figcaption>Figure 5.1</figcaption>
</figure>
<h1 id="major-observations">5. Major Observations</h1>
<p>•1.With the selection of ‘Total Trading’, ‘Line Graph’, ‘All Region’ and top 10 countries highlighted, we can find the 10 years trading patterns. Of 10 top trading countries, 9 of them are from Asian region except United States. Mainland China exceeded Malaysia in year 2013 and becomes Singapore largest trading partner, increasing to S$136B with 33% by the end of year 2020. Meanwhile, in year 2016, half of the top 10 trading partners -Mainland China, Malaysia, US, Indonesia and Republic of Korea- experienced a sudden drop in total trading values. When switching the graph option to ‘Slope’, it is observed that largest % of total trading comes from Taiwan (+64%) and United (+35%), while India (-44%) and Indonesia(-40%) in the opposite. <img src="pic/5.1totaltrading.png" alt="Figure 5.1 Total Trading Insights" /> •2. Selecte’Net Export’, ‘Slope Graph’ for right chart. In the largest Asian markets, Hong Kong is the biggest net exporter of Singapore all time with over $S50B dollars and increased 11% during the time. While other former leading exporters such as Malaysia and Indonesia, the net export value has dropped significantly, especially Malaysia has become Singapore’s net importer by end of year 2020 at -$12B dollars. For Singapore merchandise importers, Taiwan is taking the leading position in year 2020 as its import values increased about 2 times as shown in the left graph (y-axis).</p>
<figure>
<img src="pic/5.2netimport.png" alt="" /><figcaption>Figure 5.2.1 Net Export Insights_Asia</figcaption>
</figure>
<p>•3. For other regions, such as American Regions, United States net export value increased from bottom position to the top among other countries in the region (at S$6B +127%) in year 2020. As shown in the trajectory graph, the export value with United States has increased about 2 times during the period.</p>
<figure>
<img src="pic/5.2netimport_america.png" alt="" /><figcaption>Figure 5.2.2 Net Export Insights_America</figcaption>
</figure>
<p>For Europe Regions, the import and export values fluctuates significantly with net export value range from -$1B to $2B, except for Netherlands and Belgium, of which the net export value has a stable increase and reached to $11B and $5B respectively in 2020.</p>
<p><img src="pic/5.2netexport_europe.png" alt="Figure 5.2.3 Net Export Insights_Europe" /><br />
While for Oceania Regions, they all have merchandise trade surplus with Singapore. However,Australia, the largest trading partner of the region, has $7B (-27%) drop in net export values mainly contributing by the shrinking of export volumes -$8B.</p>
<figure>
<img src="pic/5.2netimport_oceania.png" alt="" /><figcaption>Figure 5.2.4 Net Export Insights_Oceania</figcaption>
</figure>
<p>Thank you for reading up to this point!</p>
<h1 id="reference">Reference:</h1>
<p><em>Department of Statistics, Singapore. (2020)</em>. Retrieved from Merchandise Trade Performance with Major Trading Partners, 2020: <a href="https://www.singstat.gov.sg/modules/infographics/singapore-international-trade" class="uri">https://www.singstat.gov.sg/modules/infographics/singapore-international-trade</a></p>
<p>Esteban Ortiz-Ospina, Nicolas Lippolis. (2017, October 30). <em>Our World in Data</em>. Retrieved from Are emerging economies deindustrializing too quickly?: <a href="https://ourworldindata.org/growth-and-structural-transformation-are-emerging-economies-industrializing-too-quickly" class="uri">https://ourworldindata.org/growth-and-structural-transformation-are-emerging-economies-industrializing-too-quickly</a></p>
<p><em>International Classifications. (2021)</em>. Retrieved from Department of Statistics,Singapore: <a href="https://www.singstat.gov.sg/standards/international-classifications" class="uri">https://www.singstat.gov.sg/standards/international-classifications</a></p>
<p>Sleeper, R. (2021). <em>Playfair Data</em>. Retrieved from 3 Ways to Make Splendid Slope Graphs in Tableau: <a href="https://playfairdata.com/3-ways-to-make-splendid-slope-graphs-in-tableau/" class="uri">https://playfairdata.com/3-ways-to-make-splendid-slope-graphs-in-tableau/</a></p>
<p><em>Standard country or area codes for statistical use (M49) Overview. (2021)</em>. Retrieved from UN - Statistics Division: <a href="https://unstats.un.org/unsd/methodology/m49/" class="uri">https://unstats.un.org/unsd/methodology/m49/</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
